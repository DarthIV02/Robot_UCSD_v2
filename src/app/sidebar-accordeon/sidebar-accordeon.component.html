<ion-content #full [scrollEvents]="true" (ionScroll)="handleScroll($any($event))">
  <ion-accordion-group [multiple]="true" #listenerbig> <!--(ionChange)="accordionGroupChange($event)"-->
    <ion-accordion value="NonVerbal">
      <ion-item slot="header" color="primary">
        <ion-icon name="mic-off-outline" slot="start"></ion-icon>
        <ion-label>Non-Verbal</ion-label>
      </ion-item>
      <ion-item-group slot="content">
        <!--Inside of the verbal accordeon-->
        <!--<ion-accordion-group [multiple]="true" #listener_non_verbal (ionChange)="accordionGroupChange($event, 'listener_non_verbal')">-->
          <ion-accordion value="body-gestures" [ngClass]="{'custom-expanded': isExpanded, 'custom-collapsed': !isExpanded}">
            <ion-item slot="header" color="light">
              <ion-icon aria-hidden="true" name="accessibility-outline" slot="start"></ion-icon>
              <ion-label>Body Gestures</ion-label>
            </ion-item>
            <!--Inside of the body-gesture accordeon-->
            <div slot="content">
              <ion-list class="my-componente2">
                <div *ngFor="let item of body_gestures_blocks; let index" 
                draggable="true"
                (dragend)="onDragEnd($event, item)"
                title="{{ item.description }}"
                class="list_puzzle"
                (contextmenu)="openPopover(item.color, $event, item)">
                <ion-icon src="../../assets/semi_cropped.svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+item.color+')', 'float':'left', 'margin-top': '-2px', 'margin-left':'10px'}"></ion-icon>
                  <div class="square red">
                    <div id="text"
                    size="small">
                    <ion-button class="button" color="{{item.color}}">{{ item.label }}</ion-button>
                    </div>
                  </div>
                  <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+item.color+')', 'margin-top':'-6px', 'width':'10px', 'stroke':'none', 'float':'left'}"></ion-icon>
                  <ion-icon src="../../assets/anti_semi(1).svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+item.color+')', 'float':'left', 'margin-left':'-2px', 'margin-top':'-1px', 'stroke':'none'}"></ion-icon>
                  <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+item.color+')', 'margin-top':'-6px', 'margin-left':'-2px', 'width':'calc(100% - 40px + 4px)', 'stroke':'none', 'margin-bottom':'20px'}"></ion-icon>
                  <br>
                </div>
              </ion-list>
            </div>
          </ion-accordion>
          <ion-accordion value="facial-expressions">
            <ion-item slot="header" color="light">
              <ion-icon aria-hidden="true" name="happy-outline" slot="start"></ion-icon>
              <ion-label>Facial Expressions</ion-label>
            </ion-item>
            <!--Inside of the facial-expression accordeon-->
            <div slot="content">
              <ion-list class="my-componente2">
                <div *ngFor="let item of facial_expresions_blocks; let index" 
                draggable="true"
                (dragend)="onDragEnd($event, item)"
                title="{{ item.description }}"
                class="list_puzzle"
                (contextmenu)="openPopover(item.color, $event, item)">
                <ion-icon src="../../assets/semi_cropped.svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+item.color+')', 'float':'left', 'margin-top': '-2px', 'margin-left':'10px'}"></ion-icon>
                  <div class="square green">
                    <div id="text"
                    size="small">
                    <ion-button class="button" color="{{item.color}}">{{ item.label }}</ion-button>
                    </div>
                  </div>
                  <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+item.color+')', 'margin-top':'-6px', 'width':'10px', 'stroke':'none', 'float':'left'}"></ion-icon>
                  <ion-icon src="../../assets/anti_semi(1).svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+item.color+')', 'float':'left', 'margin-left':'-2px', 'margin-top':'-1px'}"></ion-icon>
                  <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+item.color+')', 'margin-top':'-6px', 'margin-left':'-2px', 'width':'calc(100% - 40px + 4px)', 'stroke':'none', 'margin-bottom':'20px'}"></ion-icon>
                  <br>
                </div>
              </ion-list>
            </div>
          </ion-accordion>
        <!--</ion-accordion-group>-->
      </ion-item-group>
    </ion-accordion>
    <ion-accordion value="Verbal" class="my-componente2">
      <ion-item slot="header" color="primary">
        <ion-icon aria-hidden="true" name="mic-outline" slot="start"></ion-icon>
        <ion-label>Verbal</ion-label>
      </ion-item>
      <div slot="content">
        <!--Inside of the non-verbal accordeon-->
        <div draggable="true"
          (dragend)="onDragEnd($event, talk)"
          title="{{ talk.description }}"
          class="list_puzzle"
          (contextmenu)="openPopover(talk.color, $event, talk)">
          <ion-icon src="../../assets/semi_cropped.svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+talk.color+')', 'float':'left', 'margin-top': '-2px', 'margin-left':'10px'}"></ion-icon>
            <div class="square yellow">
              <div id="text"
              size="small">
              <ion-button class="button" color="{{talk.color}}">{{ talk.label }}</ion-button>
              </div>
            </div>
            <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+talk.color+')', 'margin-top':'-6px', 'width':'10px', 'stroke':'none', 'float':'left'}"></ion-icon>
            <ion-icon src="../../assets/anti_semi(1).svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+talk.color+')', 'float':'left', 'margin-left':'-2px', 'margin-top':'-1px'}"></ion-icon>
            <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+talk.color+')', 'margin-top':'-6px', 'margin-left':'-2px', 'width':'calc(100% - 40px + 4px)', 'stroke':'none', 'margin-bottom':'20px'}"></ion-icon>
            <br>
          </div>
          <ion-accordion value="sounds">
            <ion-item slot="header" color="light">
              <ion-icon aria-hidden="true" name="volume-high-outline" slot="start"></ion-icon>
              <ion-label>Sounds</ion-label>
            </ion-item>
            <!--Inside of the sounds accordeon-->
            <div slot="content">
              <ion-list class="my-componente2">
                <div *ngFor="let item of speech_blocks; let index" 
                draggable="true"
                (dragend)="onDragEnd($event, item)"
                title="{{ item.description }}"
                class="list_puzzle"
                (contextmenu)="openPopover(item.color, $event, item)">
                <ion-icon src="../../assets/semi_cropped.svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+item.color+')', 'float':'left', 'margin-top': '-2px', 'margin-left':'10px'}"></ion-icon>
                  <div class="square yellow">
                    <div id="text"
                    size="small">
                    <ion-button class="button" color="{{item.color}}">{{ item.label }}</ion-button>
                    </div>
                  </div>
                  <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+item.color+')', 'margin-top':'-6px', 'width':'10px', 'stroke':'none', 'float':'left'}"></ion-icon>
                  <ion-icon src="../../assets/anti_semi(1).svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+item.color+')', 'float':'left', 'margin-left':'-2px', 'margin-top':'-1px'}"></ion-icon>
                  <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+item.color+')', 'margin-top':'-6px', 'margin-left':'-2px', 'width':'calc(100% - 40px + 4px)', 'stroke':'none', 'margin-bottom':'20px'}"></ion-icon>
                  <br>
                </div>
              </ion-list>
            </div>
          </ion-accordion>
        <!--</ion-accordion-group>-->
      </div>
    </ion-accordion>
    <ion-accordion value="Actions">
      <ion-item slot="header" color="primary">
        <ion-icon aria-hidden="true" name="cog-outline" slot="start"></ion-icon>
        <ion-label>Actions</ion-label>
      </ion-item>
      <!--Inside of the routines accordeon-->
      <div slot="content">
          <ion-list class="my-componente2">
            <div *ngFor="let item of routines_blocks; index as i"
            draggable="true"
            (dragend)="onDragEnd($event, item)"
            title="{{ item.description }}"
            class="list_puzzle"
            (contextmenu)="openPopover(item.color, $event, item)">
            <ion-icon src="../../assets/semi_cropped.svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+item.color+')', 'float':'left', 'margin-top': '-2px', 'margin-left':'10px'}"></ion-icon>
              <div class="square medium">
                <div id="text"
                size="small">
                <ion-button class="button" color="{{item.color}}">{{ item.label}}</ion-button>
                </div>
              </div>
              <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+item.color+')', 'margin-top':'-6px', 'width':'10px', 'stroke':'none', 'float':'left'}"></ion-icon>
              <ion-icon src="../../assets/anti_semi(1).svg" [ngStyle]="{'height':'15px', 'width':'30px', 'fill': 'var(--ion-color-'+item.color+')', 'float':'left', 'margin-left':'-2px', 'margin-top':'-1px'}"></ion-icon>
              <ion-icon src="../../assets/square-filled-geometric-shape-svgrepo-com.svg" [ngStyle]="{'height': '30px!important', 'fill': 'var(--ion-color-'+item.color+')', 'margin-top':'-6px', 'margin-left':'-2px', 'width':'calc(100% - 40px + 4px)', 'stroke':'none', 'margin-bottom':'20px'}"></ion-icon>
              <br>
            </div>
          </ion-list>
      </div>
    </ion-accordion>
  </ion-accordion-group>
  <br>
  <div class="last_routine">
    <ion-text (click)="openLastRoutine($event)"><u>Open Last Routine</u></ion-text>
  </div>

</ion-content>

<ion-popover #popover [isOpen]="isOpen" (didDismiss)="isOpen = false" triggerAction="context-menu">
  <ng-template>
    <ion-content>
      <ion-list>
        <ion-item [button]="true" [detail]="false" (click) = "delete_routine($event)">Delete</ion-item>
        <ion-item [button]="true" [detail]="false" (click) = "download_routine($event)">Download</ion-item>
        <ion-item [button]="true" [detail]="false" (click)="onModifyClick()">Modify</ion-item>
      </ion-list>
    </ion-content>
  </ng-template>
</ion-popover>